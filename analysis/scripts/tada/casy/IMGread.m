% Copyright Haskins Laboratories, Inc., 2001-2003% 270 Crown Street, New Haven, CT 06514, USA% programmer Yuriy Koblents-Mishke% a lot was borrowed from PCMread.m by Mark Tiede% e-mail koblents@haskins.yale.edufunction M = IMGread(fileName)%PCMREAD  - read a Haskins format IMG file% FILENAME specifies the PCM file to load% if FILENAME contains the '*' character it is interpreted as a mask% use IMGread (no argument) to select file interactively using dialog box%	constantsmask = '*.img';				% PCM file mask%	load filename if necessaryif nargin < 1, fileName = []; end;if nargin<2 | isempty(ignorePeriod), ignorePeriod = 0; end;if findstr(fileName, '*'),	mask = fileName;	fileName = [];end;if isempty(fileName),  [file, pathName] = uigetfile(mask, 'Select Haskins format *.IMG file');  if file == 0    fileName = [];   else    fileName = [pathName file];  endend;if isempty( fileName ) % The Cancel button hit on file select dialog   M = [];else         %  open file  [fid, msg] = fopen(fileName, 'rb' );  if fid == -1    error([msg, ' (', fileName, ')']);  end  M = fread( fid, [256, 256], 'uint8' );  fclose( fid );end